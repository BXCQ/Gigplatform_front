# 雇主端功能说明

本文档详细介绍了厦门零工市场微信小程序雇主端的主要功能、页面设计以及相关的技术实现要点，特别是与后端API的交互。

## 一、核心功能模块与页面设计

雇主身份的核心功能模块主要包括企业认证、岗位发布、岗位管理、用工对接（或申请管理）等。

### 1. 雇主首页/中心 (Employer Dashboard)

*   **功能定位**: 雇主登录后的主要入口，提供关键信息概览和常用操作的快捷入口。
*   **页面元素**:
    *   顶部导航栏：显示“雇主中心”标题，可能包含消息通知图标。
    *   数据概览区：展示如图已发布岗位数量、待处理申请数量等关键指标。
    *   快捷操作按钮：
        *   “发布新岗位”：引导至岗位发布页面。
        *   “管理我的岗位”：跳转到岗位管理列表。
*   **相关API**:
    *   获取雇主信息: 调用 `api.getEmployerProfile()` (在 `api/index.js` 中定义)。
    *   (如有) 获取雇主概览统计数据 (例如: `api.getEmployerDashboardStats()`, 需在 `api/index.js` 中按需添加)。

### 2. 企业认证 (Enterprise Certification)

*   **功能定位**: 确保雇主身份的真实性和合法性，是发布岗位的前提。
*   **页面元素**:
    *   表单区域：用于填写企业名称、统一社会信用代码、上传营业执照、法人身份证等信息。
    *   认证状态显示：明确告知用户当前的认证状态（未认证、审核中、已认证、认证失败）。
*   **流程**:
    1.  雇主填写认证信息并提交。
    2.  后端进行审核。
    3.  前端更新并显示认证状态。
*   **相关API**:
    *   提交认证资料: (例如: `api.submitEmployerCertification(data)`, 需在 `api/index.js` 中按需添加)。
    *   查询认证状态: 可能通过 `api.getEmployerProfile()` 返回的信息中包含认证状态，或有单独接口 (例如: `api.getCertificationStatus()`, 需在 `api/index.js` 中按需添加)。

### 3. 岗位发布 (Job Posting)

*   **功能定位**: 雇主创建并发布新的零工岗位需求。
*   **页面设计**: 通常为多步骤表单或一个包含所有必要信息的综合表单。
    *   **岗位基本信息**: 岗位名称、岗位类型（如家政、派送、餐饮）、薪资待遇（时薪/日结/项目制，金额范围）、招聘人数。
    *   **工作详情**: 工作内容描述、技能要求、工作时间（日期、时段）、工作地点（可集成地图选点）。
    *   **联系方式**: 雇主联系人、联系电话。
    *   **(可选)** 其他：如是否提供食宿、保险等。
*   **操作**: 填写完毕后可预览，确认无误后发布。
*   **相关API**:
    *   `api.publishJob(data)`: 提交新的岗位信息至后端进行发布。 `data` 对象将包含所有表单收集到的岗位详情。

### 4. 岗位管理 (Job Management)

*   **功能定位**: 雇主查看、编辑、更新或下架已发布的岗位。
*   **页面设计**:
    *   岗位列表：以卡片或列表形式展示雇主发布的所有岗位，包含岗位名称、状态（招聘中、已招满、已下架）、发布时间等。
    *   筛选与排序：支持按岗位状态、发布时间等条件进行筛选和排序。
*   **单岗位操作**:
    *   **查看详情/申请**: 点击岗位可查看完整详情及申请该岗位的人员列表。
    *   **编辑**: 修改岗位信息 (例如薪资、描述、招聘人数)。
    *   **上架/下架**: 控制岗位的在线状态。
    *   **删除**: 永久移除岗位 (需谨慎操作提示)。
    *   **查看申请人**: 跳转到该岗位的申请人列表页面。
*   **相关API**:
    *   `api.getEmployerJobs(params)`: 获取该雇主发布的岗位列表，`params` 可用于分页和筛选。
    *   `api.getEmployerJobDetail(jobId)`: 获取特定岗位的详细信息（也可能用于编辑前的数据加载）。
    *   `api.updateJob(jobId, data)`: 更新指定 `jobId` 的岗位信息。
    *   `api.deleteJob(jobId)`: 删除指定 `jobId` 的岗位。
    *   (上架/下架操作可能通过 `api.updateJob` 改变岗位状态，或后端提供专门的API接口，如 `api.setJobStatus(jobId, status)`)

### 5. 申请管理 / 用工对接 (Application Management / Worker Matching)

*   **功能定位**: 雇主查看哪些零工申请了其发布的岗位，并进行后续的沟通、筛选和录用操作。
*   **页面设计**:
    *   职位申请列表：针对某个具体职位，展示所有申请该职位的零工用户列表。
    *   申请人信息：每条申请记录应包含申请人昵称/姓名、头像、关键技能/简介、申请时间等。
    *   操作：查看申请人简历/详情、联系申请人（通过平台内聊天或显示联系方式）、标记状态（如待沟通、已录用、不合适）。
*   **相关API**:
    *   `api.getApplicantsForJob(jobId)`: 获取指定 `jobId` 岗位的所有申请人列表。
    *   (后续操作如“录用申请”、“拒绝申请”等，都需要后端提供相应的API接口，例如: `api.processApplication(applicationId, action)`，需在 `api/index.js` 中按需添加)

### 6. (可选) 数据统计 (Data Analytics)

*   **功能定位**: 向雇主展示招聘活动的相关数据，如岗位浏览量、申请数量、成功匹配率等。
*   **页面设计**: 使用图表（如折线图、饼图、柱状图）直观展示数据。
*   **相关API**: 需要后端提供相应的数据统计接口 (例如: `api.getEmployerStats()`, 需在 `api/index.js` 中按需添加)。

## 二、API 交互简述

雇主端的各项操作均通过调用项目 `api/index.js` 文件中定义的JavaScript函数与后端服务进行数据交互。

*   **统一请求封装**: `api/index.js` 中的 `request` 函数是所有API请求的基础，它封装了 `uni.request`，并提供了统一的请求头设置、加载提示（`uni.showLoading`）、以及初步的响应成功/失败判断逻辑。
*   **接口方法调用**:
    *   在雇主相关的 `.vue` 页面的 `<script>` 部分，首先通过 `import api from '@/api/index.js';` (或正确的相对路径) 引入API模块。
    *   然后，在需要与后端交互的方法中（通常是用户触发的事件处理函数或页面加载时的生命周期钩子），通过 `api.methodName(params)` 的方式调用相应的接口函数。例如，发布职位时调用 `api.publishJob(jobData)`。
*   **数据传递**: 页面逻辑中收集的用户输入（如表单数据）或操作所需的参数（如 `jobId`）会作为实际参数传递给 `api/index.js` 中的具体API方法。这些方法再将数据作为请求体（POST/PUT请求）或URL查询参数（GET请求）发送给后端。
*   **异步与响应处理**:
    *   所有API方法均返回一个 `Promise` 对象。
    *   在页面方法中，可以使用 `async/await` 语法糖来处理异步调用，使得代码更易读：
        ```javascript
        async handleSubmit() {
          try {
            const jobData = { /* ... 从表单获取数据 ... */ };
            const result = await api.publishJob(jobData);
            uni.showToast({ title: '发布成功!', icon: 'success' });
            // 后续操作，如跳转页面
          } catch (error) {
            console.error('发布失败:', error);
            // uni.showToast 已在request中处理大部分错误提示，但可在此处添加特定逻辑
          }
        }
        ```
    *   或者使用传统的 `.then().catch()` 方法处理 `Promise`。
*   **后端地址配置**: 请务必确认 `api/index.js` 文件顶部的 `BASE_URL` 常量已正确配置为后端API服务的实际部署地址。

## 三、技术实现要点 (摘要)

（本部分旨在概述雇主端功能实现中的一些关键技术点，部分内容可能与原有文档相似并已整合）

1.  **身份与权限控制**:
    *   用户登录后，前端需能识别当前用户是否为雇主角色，并检查其企业认证状态。这通常依赖于登录接口返回的用户信息或专门的用户画像接口 (`api.getUserProfile()` 或 `api.getEmployerProfile()`)。
    *   对于需要认证才能访问的功能（如发布岗位），若用户未认证或认证未通过，应友好地提示并引导至企业认证页面。
    *   所有敏感操作的API接口（如创建/编辑/删除岗位），后端必须进行严格的身份和权限校验。

2.  **表单处理与数据校验**:
    *   涉及信息录入的页面（如企业认证、岗位发布），推荐使用 `uni-forms` 组件配合 `uni-forms-item` 和 `uni-easyinput` / `uni-data-picker` 等输入类组件，可以方便地实现数据双向绑定和表单校验规则。
    *   提交前进行前端校验，减轻后端压力，并及时给用户反馈。

3.  **状态管理 (Vuex)**:
    *   对于跨多个页面共享或需要持久化的雇主相关状态（如雇主基本信息、企业认证状态），可以考虑引入 Vuex 进行集中管理。这样可以避免 props 逐层传递的复杂性，并使得状态变更更易于追踪。

4.  **用户体验优化**:
    *   **交互反馈**: 对于所有与后端交互的操作，都应有明确的反馈，如使用 `uni.showLoading` 提示加载状态，操作完成后使用 `uni.showToast` 告知用户结果。
    *   **列表性能**: 对于岗位列表、申请人列表等可能存在大量数据的场景，应实现分页加载（配合后端的列表接口支持分页参数）或“上拉加载更多”功能，避免一次性加载过多数据导致页面卡顿。
    *   **错误处理**: `api/index.js` 中已包含基础的错误处理，但各页面在调用API后，仍可根据具体业务场景对特定错误进行定制化处理或提示。

本文档旨在为雇主端功能的开发与维护提供指导，并将随项目迭代和需求变更进行更新。